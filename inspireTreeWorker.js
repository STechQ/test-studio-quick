!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.nemo=t():e.nemo=t()}(this,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="dist",n(n.s=777)}({12:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GhostContants=void 0;var r=function(){function e(){}return e.Name="Ghost",e}();t.GhostContants=r},161:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InspireTreeHelper=void 0;var r=n(18),o=n(12),i=function(){function e(){}return e.prototype.createInspireTreeCommands=function(e,t){var n=this,r=[],o=function(e,t,i,u){for(var p=e.length>t.length?e.length:t.length,c=0;c<p;c++){u++;var a=e[c],s=t[c],l=i.map((function(e){return e}));if(l.push(u),a&&!s)return r.push({path:l,item:a,type:"add"}),void o(e.slice(c+1),[],i,u);if(!a&&s)return r.push({path:l,item:s,type:"delete"}),u--,void o([],t.slice(c+1),i,u);if(!n.isEqual(a,s)){var d=e[c+1],f=t[c+1];return d||f?d&&!f?(r.push({path:l,item:a,type:"add"}),void(n.isEqual(d,s)||o(e.slice(c+1),[],i,u))):!d&&f?(r.push({path:l,item:s,type:"delete"}),u--,void(n.isEqual(a,f)||o([],t.slice(c+1),i,u))):n.isEqual(d,s)?(r.push({path:l,item:a,type:"add"}),void o(e.slice(c+1),t.slice(c),i,u)):(r.push({path:l,item:s,type:"delete"}),u--,void o(e.slice(c),t.slice(c+1),i,u)):(r.push({path:l,item:a,type:"update"}),void o(e.slice(c+1),t.slice(c+1),i,u))}var v=n.getSafeChildNode(a.children),y=n.getSafeChildNode(s.children),m=i.map((function(e){return e}));m.push(u),o(v,y,m,-1)}};return o(t,e.currentTreeData,[],-1),r},e.prototype.isEqual=function(e,t){return!e&&!t||!(!e||!t)&&e.text==t.text},e.prototype.getSafeChildNode=function(e){return e&&!0!==e?e:[]},e.prototype.createInspireTreeEditorDisplayName=function(e,t){if(t){var n={},o={},i={customCompValues:{},editorDisplayNames:{}};return r.QJsonHelper.ForEachComp(t,(function(t,r){var u=e.getComponentPim(t.T),p=e.pimManager.GetComponentList();return"CustomComponent"==t.T?Object.keys(p).forEach((function(e){var n,r=p[e];Object.keys(null===(n=r.Component)||void 0===n?void 0:n.Properties).forEach((function(n){var c,a,s,l;if("QJsonPath"==(null===(c=r.Component)||void 0===c?void 0:c.Properties[n].Name)&&(null===(s=null===(a=r.Component)||void 0===a?void 0:a.Properties[n].DefaultValue)||void 0===s?void 0:s.EditorDefault)==(null===(l=t.P.QJsonPath)||void 0===l?void 0:l.H)&&(null==u?void 0:u.EditorDisplayName)){var d="RenderingComponent"==p[e].Component.Name?u.EditorDisplayName:p[e].Component.Name;o[t._Editor.eID]=d,i.customCompValues=o}}))})):(null==u?void 0:u.EditorDisplayName)&&(n[t.T]||(n[t.T]=u.EditorDisplayName,i.editorDisplayNames=n)),!0})),i}},e.prototype.createInspireTreeJson=function(e,t){var n=this;if(!e||!t)return[];var o=[],i=function(e){var n,r;return"CustomComponent"==e.T?null===(n=t.customCompValues)||void 0===n?void 0:n[e._Editor.eID]:null===(r=t.editorDisplayNames)||void 0===r?void 0:r[e.T]};return r.QJsonHelper.ForEachComp(e,(function(e,t){var r=function(e,t){var u=i(e),p=n.createInspireItem(e,u);if(Object.keys(e.C).forEach((function(t){e.C[t].c.filter((function(e){return null!=e})).map((function(e){var t;if(p.children=p.children||[],null==e?void 0:e.C)t=r(e,!0);else{var o=i(e);t=n.createInspireItem(e,o)}p.children.push(t)}))})),t)return p;o.push(p)};return r(e,1!=(null==t?void 0:t.length)),!0})),o},e.prototype.createInspireItem=function(e,t){var n,r,i={text:(null!=t?t:e.T)+"("+e.P.ID.H+")",EID:e._Editor.eID,compType:e.T,O:{cType:null===(n=e.O)||void 0===n?void 0:n.cType},nativeCompType:(null===(r=e.CP)||void 0===r?void 0:r.includes("<<named:"))?"namedComponent":void 0};return e.T==o.GhostContants.Name&&(i.itree={state:{"drop-target":!1,draggable:!1,selectable:!1,focused:!1,selected:!1}}),e.O&&0===Object.keys(e.O).length&&(i.itree={state:{"drop-target":!1}}),i},e}();t.InspireTreeHelper=i},18:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QJsonHelper=t.CompSearchKey=void 0;var r,o=n(6);!function(e){e[e.PID=0]="PID",e[e.EditorID=1]="EditorID",e[e.Render=2]="Render"}(r=t.CompSearchKey||(t.CompSearchKey={}));var i=function(){function e(){}return e.ForEachComp=function(e,t,n,r){var o=function(e){var n,i=e.curJson,u=e.path,p=e.parentCompJson,c=e.compiledJson;if(i&&0!==i.length)for(var a=r?-1:1,s=r?i.length-1:0,l=r?-1:i.length,d=s;d!==l;d+=a){var f=i[d],v=null==c?void 0:c[d];if(f){if(u.push(d),!1===t(f,u.map((function(e){return e})),{compName:f.T,eID:f._Editor.eID,parentCompJson:p,compiledJson:v}))return!1;if(f.C)for(var y in f.C){if(u.push(y),!1===o({curJson:f.C[y].c,path:u,parentCompJson:f,compiledJson:null===(n=null==v?void 0:v.C[y])||void 0===n?void 0:n.c}))return!1;u.pop()}u.pop()}}else console.error("curJson is empty or undefined")};o({curJson:e,path:[],compiledJson:n})},e.findComponentByType=function(t,n){var r;return e.ForEachComp(t,(function(e){return e.T!=n||(r=e,!1)})),r},e.prototype.findParentArrayPath=function(t,n){return e.FindParentArrayPath(t,n)},e.FindParentArrayPath=function(e,t){var n,r=null,i=e.pop();if(0==e.length)return{selfIndex:i,parentArray:t,parent:null};for(var u=t,p=new o.TypeHelper,c=0;c<e.length;c++){var a=e[c];u=p.isObject(u)?(null===(n=null==(r=u)?void 0:r.C[a])||void 0===n?void 0:n.c)||[]:u[a]||[]}return{selfIndex:i,parentArray:u,parent:r}},e.prototype.findCompBySearchField=function(t,n,o){return void 0===o&&(o=r.EditorID),e.FindCompBySearchField(t,n,o)},e.FindCompBySearchField=function(t,n,o,i){void 0===o&&(o=r.EditorID);var u=null;return e.ForEachComp(t,(function(e,t){return function(e){var t,n,i,u,p;switch(o){case r.PID:return null===(n=null===(t=e.P)||void 0===t?void 0:t.ID)||void 0===n?void 0:n.H;case r.Render:return null===(u=null===(i=e.P)||void 0===i?void 0:i.Render)||void 0===u?void 0:u.H;case r.EditorID:default:return null===(p=e._Editor)||void 0===p?void 0:p.eID}}(e)!==n||(u={compJson:e,curPath:t},!1)}),void 0,i),u},e.ParseParameters=function(e,t){if(e){var n="TS"==t||"JS"==t?function(e){return{name:e.split(":")[0],type:e.split(":")[1]}}:function(e){return{name:e}};return e.split(",").map(n)}},e.FindCompPathByEID=function(t,n){var r;return e.ForEachComp(t,(function(e,t){return e._Editor.eID!=n||(r=t,!1)})),r},e}();t.QJsonHelper=i},6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypeHelper=void 0;var r=function(){function e(){}return e.prototype.isJsonString=function(e){try{JSON.parse(e)}catch(e){return!1}return!0},e.prototype.GetObjectType=function(e){return Object.prototype.toString.call(e)},e.prototype.isArray=function(e){return"[object Array]"==this.GetObjectType(e)},e.prototype.isString=function(e){return"[object String]"===this.GetObjectType(e)},e.prototype.isNumber=function(e){return"[object Number]"===this.GetObjectType(e)},e.prototype.isNull=function(e){return null==e},e.prototype.isFunction=function(e){return"[object Function]"===this.GetObjectType(e)},e.prototype.isObject=function(e){return"[object Object]"===this.GetObjectType(e)},e.prototype.isBool=function(e){return"[object Boolean]"===this.GetObjectType(e)},e.prototype.isBooleanConstructor=function(e){return"function Boolean() { [native code] }"==(null==e?void 0:e.toString())},e.prototype.isStringConstructor=function(e){return"function String() { [native code] }"==(null==e?void 0:e.toString())},e.prototype.isArrayConstructor=function(e){return"function Array() { [native code] }"==(null==e?void 0:e.toString())},e.prototype.isObjectConstructor=function(e){return"function Object() { [native code] }"==(null==e?void 0:e.toString())},e.prototype.isNumberConstructor=function(e){return"function Number() { [native code] }"==(null==e?void 0:e.toString())},e.prototype.isDateString=function(e){return!!this.isString(e)&&!isNaN(Date.parse(e))},e.prototype.isDate=function(e){return"[object Date]"===this.GetObjectType(e)},e.prototype.isFile=function(e){return"[object File]"===this.GetObjectType(e)},e.prototype.isBlob=function(e){return new Blob([e])instanceof Blob},e.prototype.cloneObject=function(e){var t;if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return(t=new Date).setTime(e.getTime()),t;if(Array.isArray(e)){t=[];for(var n=0,r=e.length;n<r;n++)t[n]=this.cloneObject(e[n]);return t}if("object"==typeof e){for(var o in t=e.constructor&&e.constructor.length<1?new e.constructor:{},e)e.hasOwnProperty(o)&&(t[o]=this.cloneObject(e[o]));return t}throw new Error("Unable to copy obj! Its type isn't supported.")},e}();t.TypeHelper=r},777:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InspireTreeWorker=void 0;var r=n(161),o=function(){this.inspireTreeHelper=new r.InspireTreeHelper};t.InspireTreeWorker=o;var i=self,u=new o;i.onmessage=function(e){setTimeout((function(){var t=e.data,n=u.inspireTreeHelper.createInspireTreeJson(t.pjson,t.editorDisplayNames);if(t.recreate)p({treeData:n,recreate:t.recreate});else{var r=u.inspireTreeHelper.createInspireTreeCommands(t,n);p({comamnds:r,treeData:n,recreate:t.recreate})}}),50)};var p=function(e){i.postMessage(e)};t.default=null}})}));